<% layout('layouts/boilerplate')%>
<div id="cluster-map" class="mb-3"></div>
<!-- <h1>All Hiking Trails</h1>
<div>
  <a href="/hikingtrails/new">Add Hiking Trail</a>
</div> -->
<div class="row">
  <% for (let hikingtrail of hikingtrails){%>
  <div class="col-md-6 col-lg-4">
    <div class="card card-blog mb-3">
      <div class="card-image">
        <%if(hikingtrail.images.length) {%>
        <img
          crossorigin="anonymous"
          class="img-fluid"
          alt=""
          src="<%=hikingtrail.images[0].url%>"
        />
        <% }else {%>
        <img
          crossorigin="anonymous"
          class="img-fluid"
          alt=""
          src="https://res.cloudinary.com/dxs1ss1av/image/upload/v1691082564/GoHiking/vjjigeucuj7vjwkrrmxp.jpg"
        />
        <% } %>
      </div>
      <div class="card-body">
        <h5 class="card-title"><%= hikingtrail.title %></h5>
        <p class="card-text"><%= hikingtrail.description %></p>
        <p class="card-text">
          <span class="location-icon"></span>
          <small class="text-muted"><%= hikingtrail.location%></small>
        </p>
        <a
          class="btn btn-primary explore"
          href="/hikingtrails/<%=hikingtrail._id%>"
          >View <%=hikingtrail.title%></a
        >
      </div>
    </div>
  </div>
  <% }%>
</div>

<script>
  const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
  const hikingtrails = { features: <%- JSON.stringify(hikingtrails) %>}
</script>

<script src="/javascripts/clusterMap.js"></script>
